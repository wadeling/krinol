# 项目架构文档

## 系统架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                        用户界面层                                │
├─────────────────────────────────────────────────────────────────┤
│  Vue.js 3 + Element Plus + Pinia + Vue Router                  │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐│
│  │   登录页    │ │   仪表板    │ │  简历管理   │ │  分析结果   ││
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘│
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ HTTP/HTTPS
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                        API网关层                                │
├─────────────────────────────────────────────────────────────────┤
│                    Nginx (反向代理)                             │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  • 静态文件服务                                              ││
│  │  • API路由代理                                              ││
│  │  • 负载均衡                                                  ││
│  │  • SSL终止                                                  ││
│  └─────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
                                │
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                       应用服务层                                │
├─────────────────────────────────────────────────────────────────┤
│                    FastAPI 后端服务                             │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐│
│  │  认证模块   │ │  简历模块   │ │  分析模块   │ │  用户模块   ││
│  │  Auth       │ │  Resume     │ │  Analysis   │ │  User       ││
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘│
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐│
│  │  文件处理   │ │  日志服务   │ │  配置管理   │ │  工具函数   ││
│  │  File       │ │  Logger     │ │  Config     │ │  Utils      ││
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘│
└─────────────────────────────────────────────────────────────────┘
                                │
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                       数据存储层                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐│
│  │  PostgreSQL │ │    Redis    │ │  文件存储   │ │  日志存储   ││
│  │  主数据库   │ │   缓存      │ │  上传文件   │ │  应用日志   ││
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘│
└─────────────────────────────────────────────────────────────────┘
                                │
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                       外部服务层                                │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐│
│  │  OpenAI API │ │  文件解析   │ │  邮件服务   │ │  监控服务   ││
│  │  AI分析     │ │  PDF/DOCX   │ │  通知       │ │  性能监控   ││
│  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘│
└─────────────────────────────────────────────────────────────────┘
```

## 技术栈详细说明

### 前端技术栈
- **Vue 3**: 渐进式JavaScript框架，提供响应式数据绑定和组件化开发
- **Element Plus**: 基于Vue 3的UI组件库，提供丰富的界面组件
- **Pinia**: Vue 3的状态管理库，替代Vuex
- **Vue Router**: Vue官方路由管理器，支持单页应用导航
- **Axios**: HTTP客户端库，用于API请求
- **Vite**: 现代化前端构建工具，提供快速的开发体验

### 后端技术栈
- **FastAPI**: 现代、快速的Python Web框架，自动生成API文档
- **Pydantic**: 数据验证和序列化库，确保数据类型安全
- **SQLAlchemy**: Python SQL工具包和ORM，提供数据库抽象
- **Alembic**: 数据库迁移工具，管理数据库schema变更
- **JWT**: JSON Web Token，用于用户认证和授权
- **PyPDF2**: PDF文件处理库
- **python-docx**: Word文档处理库

### 数据存储
- **PostgreSQL**: 主数据库，存储用户信息、简历数据、分析结果等
- **Redis**: 缓存数据库，存储会话信息、临时数据等
- **文件系统**: 存储上传的简历文件

### 部署和运维
- **Docker**: 容器化技术，确保环境一致性
- **Docker Compose**: 多容器应用编排工具
- **Nginx**: Web服务器和反向代理
- **Makefile**: 自动化构建和部署脚本

## 数据流图

```
用户上传简历
    │
    ▼
前端文件上传组件
    │
    ▼
Nginx反向代理
    │
    ▼
FastAPI后端服务
    │
    ▼
文件处理服务
    │
    ▼
文件存储 + 数据库记录
    │
    ▼
用户发起分析请求
    │
    ▼
AI分析服务
    │
    ▼
OpenAI API调用
    │
    ▼
分析结果存储
    │
    ▼
前端展示分析结果
```

## 安全架构

### 认证和授权
- JWT令牌认证，支持无状态会话
- 基于角色的访问控制（RBAC）
- 密码加密存储（PBKDF2）
- API接口权限验证

### 数据安全
- 文件上传类型和大小限制
- SQL注入防护（使用ORM）
- XSS攻击防护（前端转义）
- CSRF保护

### 网络安全
- HTTPS加密传输
- CORS跨域配置
- 请求频率限制
- 安全头部设置

## 性能优化

### 前端优化
- 代码分割和懒加载
- 静态资源CDN
- 图片压缩和优化
- 浏览器缓存策略

### 后端优化
- 数据库查询优化
- Redis缓存策略
- 异步处理（文件上传、AI分析）
- 连接池管理

### 系统优化
- 负载均衡
- 水平扩展支持
- 监控和日志
- 自动备份

## 扩展性设计

### 水平扩展
- 无状态服务设计
- 数据库读写分离
- 缓存集群
- 微服务拆分准备

### 功能扩展
- 插件化AI分析模块
- 多语言支持
- 多租户架构
- 第三方集成接口

## 监控和运维

### 应用监控
- 性能指标监控
- 错误日志收集
- 用户行为分析
- 系统健康检查

### 运维工具
- 自动化部署
- 配置管理
- 备份恢复
- 日志分析

这个架构设计确保了系统的可扩展性、可维护性和高性能，同时保持了良好的安全性和用户体验。
